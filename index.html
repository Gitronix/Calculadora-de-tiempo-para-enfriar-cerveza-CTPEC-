<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CTPEC – Calculadora de tiempo para enfriar cerveza | logoctpec.jpeg</title>
  <meta name="theme-color" content="#f5b64c">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/logoctpec.jpeg" type="image/jpeg">
  <link rel="apple-touch-icon" href="icons/logoctpec.jpeg">
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>
  <div class="page">
    <header class="hero">
      <p class="badge">CTPEC</p>
      <h1>Calculadora de tiempo para enfriar cerveza</h1>
      <p class="lede">Estimación aproximada usando la Ley de Enfriamiento de Newton. Ajusta el escenario y obtén un tiempo de referencia.</p>
    </header>

    <main class="card">
      <section class="form-section">
        <div class="section-head">
          <div>
            <p class="eyebrow">Parámetros</p>
            <h2>Define tu escenario</h2>
            <p class="hint">Selecciona envase, medio y temperaturas. La constante k se calcula con factores aproximados.</p>
          </div>
        </div>

        <form id="calc-form" class="grid">
          <div class="field units-field">
            <span class="label">Unidades</span>
            <div class="unit-toggle" role="group" aria-label="Selecciona unidades">
              <label><input type="radio" name="unidad" value="c" checked> °C</label>
              <label><input type="radio" name="unidad" value="f"> °F</label>
              <label><input type="radio" name="unidad" value="k"> K</label>
            </div>
          </div>

          <label class="field">
            <span class="label">Tipo de envase</span>
            <select id="envase-tipo" name="envase-tipo" required></select>
          </label>

          <label class="field">
            <span class="label">Tamaño / volumen</span>
            <select id="envase-volumen" name="envase-volumen"></select>
            <input type="number" id="envase-volumen-input" name="envase-volumen-input" step="any" placeholder="Volumen en ml" required>
          </label>

          <label class="field">
            <span class="label">Servilleta mojada</span>
            <select id="servilleta" name="servilleta" class="compact-select" required>
              <option value="no" selected>No</option>
              <option value="si">Sí</option>
            </select>
            <p class="servilleta-note muted" id="servilleta-note"></p>
          </label>

          <label class="field">
            <span class="label">Temperatura inicial (T₀, °C)</span>
            <input type="number" class="compact-number" id="temp-inicial" name="temp-inicial" step="0.1" placeholder="Ej: 22" required>
          </label>

          <label class="field">
            <span class="label">Temperatura objetivo (T<sub>obj</sub>, °C)</span>
            <select id="temp-objetivo-preset" name="temp-objetivo-preset"></select>
            <input type="number" class="compact-number" id="temp-objetivo" name="temp-objetivo" step="0.1" required>
          </label>

          <div class="field temp-wrap">
            <div class="label-row">
              <span class="label">Temperatura del medio (T<sub>env</sub>, °C)</span>
              <small class="muted">Elige sugerencia o personaliza</small>
            </div>
            <div class="temp-controls">
              <select id="temp-sugerida" name="temp-sugerida"></select>
              <input type="number" class="compact-number" id="temp-entorno" name="temp-entorno" step="0.1" required>
            </div>
          </div>

          <button type="submit" class="cta">Calcular tiempo</button>
        </form>
      </section>

      <section class="result-section">
        <div id="resultado" class="resultado" aria-live="polite"></div>
        <p class="note">Nota: Estimación aproximada. No reemplaza mediciones reales ni instrumentación de laboratorio.</p>
      </section>

      <section class="chart-section">
        <div class="section-head">
          <div>
            <h3>Curva de enfriamiento</h3>
            <p class="muted">Temperatura estimada a lo largo del tiempo.</p>
          </div>
        </div>
        <div id="chart" class="chart-card">
          <p class="muted">Calcula para ver la curva T(t).</p>
        </div>
      </section>

      <section class="timer-section">
        <div class="timer-head">
          <h3>Temporizador</h3>
          <p class="muted">El tiempo inicial se toma del cálculo, pero puedes ajustarlo antes de iniciar.</p>
        </div>
        <div class="timer-display" id="timer-display">00:00</div>
        <div class="timer-controls">
          <button type="button" class="btn ghost" id="timer-reset">Reiniciar</button>
          <button type="button" class="btn primary" id="timer-start">Iniciar</button>
          <button type="button" class="btn secondary" id="timer-pause">Pausar</button>
        </div>
        <div class="timer-input-wrap">
          <label class="field">
            <span class="label">Ajustar tiempo (minutos)</span>
            <input type="number" class="compact-number" id="timer-minutos" min="0" step="0.1" value="0">
          </label>
        </div>
        <div class="notif-wrap">
          <button type="button" class="btn ghost" id="notif-enable">Habilitar notificaciones</button>
          <p class="note" id="notif-status"></p>
        </div>
      </section>

      <section class="tips">
        <h3>Consejos rápidos</h3>
        <ul>
          <li>El balde con agua y hielo suele enfriar más rápido que la heladera.</li>
          <li>Agregar sal al hielo baja más la temperatura del agua y acelera el proceso.</li>
          <li>No dejes botellas de vidrio demasiado tiempo en el freezer para evitar roturas.</li>
          <li>La servilleta mojada ayuda a acelerar el intercambio térmico en el freezer.</li>
        </ul>
      </section>

      <section class="explicacion">
        <button class="toggle" type="button" id="toggle-explicacion">¿Cómo se hace el cálculo?</button>
        <div class="explicacion-contenido" id="explicacion-contenido">
          <p>Usamos la Ley de Enfriamiento de Newton, que modela cómo un objeto cambia su temperatura respecto al entorno.</p>
          <p><strong>Variables:</strong></p>
          <ul>
            <li><strong>T₀</strong>: temperatura inicial de la cerveza.</li>
            <li><strong>T_env</strong>: temperatura del entorno (freezer, heladera, balde, etc.).</li>
            <li><strong>T_obj</strong>: temperatura objetivo para tomar.</li>
            <li><strong>k</strong>: constante que depende del envase, volumen, entorno y si hay servilleta mojada.</li>
            <li><strong>t</strong>: tiempo estimado para enfriar.</li>
          </ul>
          <p><strong>Fórmulas:</strong></p>
          <p>T(t) = T_env + (T₀ − T_env) · e^(−k · t)</p>
          <p>Despejando el tiempo: t = (1 / k) · ln((T₀ − T_env) / (T_obj − T_env))</p>
        </div>
      </section>
    </main>
  </div>
</body>
</html>
